<script context="module">
  import { request, gql } from "graphql-request";

  const query = gql`
    {
      countries {
        name
        emoji
      }
    }
  `;

  export const load = async () => {
    const data = await request("https://countries.trevorblades.com/", query);

    return {
      props: {
        data,
      },
    };
  };
</script>

<script>
  export let data;
</script>

<!-- {JSON.stringify(data)} -->

<h1>Countries</h1>

{#each data.countries as { name, emoji }}
  <p>{emoji} {name}</p>
{/each}




	// let notes;
	// function getNotes() {
		// notes = client.query(gql`
		// 	query GetNotes {
		// 		allCompleteNotes {
		// 			title
		// 			memo
		// 		}
		// 	}
		// `);
	}
	// onMount(() => {
	// 	getNotes();
	// });






  {#if $data.loading}
			<!-- content here -->
			<Jumper size="60" color="#FF6400" unit="px" duration="1s" />
		{:else if $data.error}
			Error {$data.error}
		{:else}
			{#each $data.data.allCompleteNotes as note}
				<!-- content here -->
				<h2>{note.title}</h2>
				<h4>{note.memo}</h4>
			{/each}
			<!-- else if content here -->
		{/if}